<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>DATA STOCK DMU</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>

body{
font-family:'Montserrat',sans-serif;
background:url('bgweb.png') center/cover fixed;
color:white;
text-align:center;
padding:20px;
}

.main-box{
background:rgba(255,255,255,0.08);
padding:25px;
border-radius:15px;
max-width:1100px;
margin:auto;
box-shadow:0 0 30px purple;
}

table{
width:100%;
background:white;
color:black;
border-collapse:collapse;
}

th,td{
padding:10px;
border-bottom:1px solid #ddd;
}

button{
padding:6px 12px;
background:#6a0dad;
color:white;
border:none;
border-radius:6px;
cursor:pointer;
}

button:hover{
background:#7d27c1;
}

/* MODAL FORM */

.modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.7);
}

.modal-content{
background:white;
color:black;
padding:20px;
margin:8% auto;
width:350px;
border-radius:10px;
}

input{
width:100%;
padding:8px;
margin:6px 0;
}

</style>
</head>

<body>

<div class="main-box">

<h2>DATA STOCK GOGO</h2>

<table>
<thead>
<tr>
<th>NO</th>
<th>KODE</th>
<th>NAMA</th>
<th>QTY</th>
<th>IN</th>
<th>OUT</th>
</tr>
</thead>

<tbody id="stokBody"></tbody>
</table>

</div>

<!-- MODAL -->
<div id="formModal" class="modal">
<div class="modal-content">

<h3 id="formTitle"></h3>

<input id="tanggal" placeholder="Tanggal">
<input id="kode">
<input id="nama">
<input id="qty" type="number">
<input id="extra1">
<input id="extra2">

<button onclick="submitForm()">Submit</button>

</div>
</div>

<script>

/* ===== DATA SAMPLE ===== */
let spareparts=[
{kode:"VRM-01",nama:"PCB BOARD",qty:10},
{kode:"VRM-02",nama:"BATTERY",qty:5},
{kode:"VRM-03",nama:"LCD PANEL",qty:7},
];

let mode="";
let activeIndex=null;

const tbody=document.getElementById("stokBody");

function render(){

tbody.innerHTML="";

spareparts.forEach((sp,i)=>{

tbody.innerHTML+=`
<tr>
<td>${i+1}</td>
<td>${sp.kode}</td>
<td>${sp.nama}</td>
<td id="qty-${i}">${sp.qty}</td>

<td>
<button onclick="openForm('IN',${i})">IN</button>
</td>

<td>
<button onclick="openForm('OUT',${i})">OUT</button>
</td>

</tr>
`;

});

}

render();

/* OPEN FORM */

function openForm(type,index){

mode=type;
activeIndex=index;

document.getElementById("formModal").style.display="block";

document.getElementById("kode").value=spareparts[index].kode;
document.getElementById("nama").value=spareparts[index].nama;

if(type==="IN"){
document.getElementById("formTitle").innerText="FORM IN";
document.getElementById("extra1").placeholder="NO RPO";
document.getElementById("extra2").placeholder="NO PL";
}else{
document.getElementById("formTitle").innerText="FORM OUT";
document.getElementById("extra1").placeholder="NO SPB";
document.getElementById("extra2").style.display="none";
}

}

/* SUBMIT */

function submitForm(){

let qty=parseInt(document.getElementById("qty").value);

if(mode==="IN"){
spareparts[activeIndex].qty+=qty;
}

if(mode==="OUT"){
spareparts[activeIndex].qty-=qty;
}

render();

document.getElementById("formModal").style.display="none";

/* ===== NANTI DISINI KIRIM KE GOOGLE SHEET ===== */
console.log("SEND TO GOOGLE SHEET");

}

</script>

</body>
</html>